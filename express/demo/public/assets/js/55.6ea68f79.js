(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{277:function(e,s,t){"use strict";t.r(s);var a=t(28),n=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h4",{attrs:{id:"分支管理策略"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分支管理策略"}},[e._v("#")]),e._v(" 分支管理策略")]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("通常，合并分支时，如果可能，Git会用"),t("code",[e._v("Fast forward")]),e._v("模式，但这种模式下，删除分支后，会丢掉分支信息。")]),e._v(" "),t("p",[e._v("如果要强制禁用"),t("code",[e._v("Fast forward")]),e._v("模式，Git就会在merge时生成一个新的commit，这样，从分支历史上就可以看出分支信息。")]),e._v(" "),t("p",[e._v("下面我们实战一下"),t("code",[e._v("--no-ff")]),e._v("方式的"),t("code",[e._v("git merge")]),e._v("：")]),e._v(" "),t("p",[e._v("首先，仍然创建并切换"),t("code",[e._v("dev")]),e._v("分支：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ git switch -c dev\nSwitched to a new branch 'dev'\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[e._v("修改readme.txt文件，并提交一个新的commit：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('$ git add readme.txt \n$ git commit -m "add merge"\n[dev f52c633] add merge\n 1 file changed, 1 insertion(+)\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("p",[e._v("现在，我们切换回"),t("code",[e._v("master")]),e._v("：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ git switch master\nSwitched to branch 'master'\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[e._v("准备合并"),t("code",[e._v("dev")]),e._v("分支，请注意"),t("code",[e._v("--no-ff")]),e._v("参数，表示禁用"),t("code",[e._v("Fast forward")]),e._v("：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ git merge --no-ff -m \"merge with no-ff\" dev\nMerge made by the 'recursive' strategy.\n readme.txt | 1 +\n 1 file changed, 1 insertion(+)\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("p",[e._v("因为本次合并要创建一个新的commit，所以加上"),t("code",[e._v("-m")]),e._v("参数，把commit描述写进去。")]),e._v(" "),t("p",[e._v("合并后，我们用"),t("code",[e._v("git log")]),e._v("看看分支历史：")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("$ git log --graph --pretty=oneline --abbrev-commit\n*   e1e9c68 (HEAD -> master) merge with no-ff\n|\\  \n| * f52c633 (dev) add merge\n|/  \n*   cf810e4 conflict fixed\n...\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br")])]),t("p",[e._v("可以看到，不使用"),t("code",[e._v("Fast forward")]),e._v("模式，merge后就像这样：")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://www.liaoxuefeng.com/files/attachments/919023225142304/0",alt:"git-no-ff-mode"}})]),e._v(" "),t("h3",{attrs:{id:"分支策略"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分支策略"}},[e._v("#")]),e._v(" 分支策略")]),e._v(" "),t("p",[e._v("在实际开发中，我们应该按照几个基本原则进行分支管理：")]),e._v(" "),t("p",[e._v("首先，"),t("code",[e._v("master")]),e._v("分支应该是非常稳定的，也就是仅用来发布新版本，平时不能在上面干活；")]),e._v(" "),t("p",[e._v("那在哪干活呢？干活都在"),t("code",[e._v("dev")]),e._v("分支上，也就是说，"),t("code",[e._v("dev")]),e._v("分支是不稳定的，到某个时候，比如1.0版本发布时，再把"),t("code",[e._v("dev")]),e._v("分支合并到"),t("code",[e._v("master")]),e._v("上，在"),t("code",[e._v("master")]),e._v("分支发布1.0版本；")]),e._v(" "),t("p",[e._v("你和你的小伙伴们每个人都在"),t("code",[e._v("dev")]),e._v("分支上干活，每个人都有自己的分支，时不时地往"),t("code",[e._v("dev")]),e._v("分支上合并就可以了。")]),e._v(" "),t("p",[e._v("所以，团队合作的分支看起来就像这样：")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://www.liaoxuefeng.com/files/attachments/919023260793600/0",alt:"git-br-policy"}})]),e._v(" "),t("h3",{attrs:{id:"小结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[e._v("#")]),e._v(" 小结")]),e._v(" "),t("p",[e._v("Git分支十分强大，在团队开发中应该充分应用。")]),e._v(" "),t("p",[e._v("合并分支时，加上"),t("code",[e._v("--no-ff")]),e._v("参数就可以用普通模式合并，合并后的历史有分支，能看出来曾经做过合并，而"),t("code",[e._v("fast forward")]),e._v("合并就看不出来曾经做过合并。")])])}),[],!1,null,null,null);s.default=n.exports}}]);