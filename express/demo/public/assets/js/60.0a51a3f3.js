(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{274:function(e,s,n){"use strict";n.r(s);var a=n(28),t=Object(a.a)({},(function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h4",{attrs:{id:"多人协作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#多人协作"}},[e._v("#")]),e._v(" 多人协作")]),e._v(" "),n("hr"),e._v(" "),n("p",[e._v("当你从远程仓库克隆时，实际上Git自动把本地的"),n("code",[e._v("master")]),e._v("分支和远程的"),n("code",[e._v("master")]),e._v("分支对应起来了，并且，远程仓库的默认名称是"),n("code",[e._v("origin")]),e._v("。")]),e._v(" "),n("p",[e._v("要查看远程库的信息，用"),n("code",[e._v("git remote")]),e._v("：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ git remote\norigin\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br")])]),n("p",[e._v("或者，用"),n("code",[e._v("git remote -v")]),e._v("显示更详细的信息：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ git remote -v\norigin  git@github.com:michaelliao/learngit.git (fetch)\norigin  git@github.com:michaelliao/learngit.git (push)\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("p",[e._v("上面显示了可以抓取和推送的"),n("code",[e._v("origin")]),e._v("的地址。如果没有推送权限，就看不到push的地址。")]),e._v(" "),n("h3",{attrs:{id:"推送分支"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#推送分支"}},[e._v("#")]),e._v(" 推送分支")]),e._v(" "),n("p",[e._v("推送分支，就是把该分支上的所有本地提交推送到远程库。推送时，要指定本地分支，这样，Git就会把该分支推送到远程库对应的远程分支上：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ git push origin master\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("如果要推送其他分支，比如"),n("code",[e._v("dev")]),e._v("，就改成：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ git push origin dev\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("但是，并不是一定要把本地分支往远程推送，那么，哪些分支需要推送，哪些不需要呢？")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("master")]),e._v("分支是主分支，因此要时刻与远程同步；")]),e._v(" "),n("li",[n("code",[e._v("dev")]),e._v("分支是开发分支，团队所有成员都需要在上面工作，所以也需要与远程同步；")]),e._v(" "),n("li",[e._v("bug分支只用于在本地修复bug，就没必要推到远程了，除非老板要看看你每周到底修复了几个bug；")]),e._v(" "),n("li",[e._v("feature分支是否推到远程，取决于你是否和你的小伙伴合作在上面开发。")])]),e._v(" "),n("p",[e._v("总之，就是在Git中，分支完全可以在本地自己藏着玩，是否推送，视你的心情而定！")]),e._v(" "),n("h3",{attrs:{id:"抓取分支"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#抓取分支"}},[e._v("#")]),e._v(" 抓取分支")]),e._v(" "),n("p",[e._v("多人协作时，大家都会往"),n("code",[e._v("master")]),e._v("和"),n("code",[e._v("dev")]),e._v("分支上推送各自的修改。")]),e._v(" "),n("p",[e._v("现在，模拟一个你的小伙伴，可以在另一台电脑（注意要把SSH Key添加到GitHub）或者同一台电脑的另一个目录下克隆：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ git clone git@github.com:michaelliao/learngit.git\nCloning into 'learngit'...\nremote: Counting objects: 40, done.\nremote: Compressing objects: 100% (21/21), done.\nremote: Total 40 (delta 14), reused 40 (delta 14), pack-reused 0\nReceiving objects: 100% (40/40), done.\nResolving deltas: 100% (14/14), done.\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br")])]),n("p",[e._v("当你的小伙伴从远程库clone时，默认情况下，你的小伙伴只能看到本地的"),n("code",[e._v("master")]),e._v("分支。不信可以用"),n("code",[e._v("git branch")]),e._v("命令看看：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ git branch\n* master\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br")])]),n("p",[e._v("现在，你的小伙伴要在"),n("code",[e._v("dev")]),e._v("分支上开发，就必须创建远程"),n("code",[e._v("origin")]),e._v("的"),n("code",[e._v("dev")]),e._v("分支到本地，于是他用这个命令创建本地"),n("code",[e._v("dev")]),e._v("分支：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ git checkout -b dev origin/dev\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("现在，他就可以在"),n("code",[e._v("dev")]),e._v("上继续修改，然后，时不时地把"),n("code",[e._v("dev")]),e._v("分支"),n("code",[e._v("push")]),e._v("到远程：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('$ git add env.txt\n\n$ git commit -m "add env"\n[dev 7a5e5dd] add env\n 1 file changed, 1 insertion(+)\n create mode 100644 env.txt\n\n$ git push origin dev\nCounting objects: 3, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (2/2), done.\nWriting objects: 100% (3/3), 308 bytes | 308.00 KiB/s, done.\nTotal 3 (delta 0), reused 0 (delta 0)\nTo github.com:michaelliao/learngit.git\n   f52c633..7a5e5dd  dev -> dev\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br")])]),n("p",[e._v("你的小伙伴已经向"),n("code",[e._v("origin/dev")]),e._v("分支推送了他的提交，而碰巧你也对同样的文件作了修改，并试图推送：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ cat env.txt\nenv\n\n$ git add env.txt\n\n$ git commit -m \"add new env\"\n[dev 7bd91f1] add new env\n 1 file changed, 1 insertion(+)\n create mode 100644 env.txt\n\n$ git push origin dev\nTo github.com:michaelliao/learngit.git\n ! [rejected]        dev -> dev (non-fast-forward)\nerror: failed to push some refs to 'git@github.com:michaelliao/learngit.git'\nhint: Updates were rejected because the tip of your current branch is behind\nhint: its remote counterpart. Integrate the remote changes (e.g.\nhint: 'git pull ...') before pushing again.\nhint: See the 'Note about fast-forwards' in 'git push --help' for details.\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br")])]),n("p",[e._v("推送失败，因为你的小伙伴的最新提交和你试图推送的提交有冲突，解决办法也很简单，Git已经提示我们，先用"),n("code",[e._v("git pull")]),e._v("把最新的提交从"),n("code",[e._v("origin/dev")]),e._v("抓下来，然后，在本地合并，解决冲突，再推送：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ git pull\nThere is no tracking information for the current branch.\nPlease specify which branch you want to merge with.\nSee git-pull(1) for details.\n\n    git pull <remote> <branch>\n\nIf you wish to set tracking information for this branch you can do so with:\n\n    git branch --set-upstream-to=origin/<branch> dev\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br")])]),n("p",[n("code",[e._v("git pull")]),e._v("也失败了，原因是没有指定本地"),n("code",[e._v("dev")]),e._v("分支与远程"),n("code",[e._v("origin/dev")]),e._v("分支的链接，根据提示，设置"),n("code",[e._v("dev")]),e._v("和"),n("code",[e._v("origin/dev")]),e._v("的链接：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ git branch --set-upstream-to=origin/dev dev\nBranch 'dev' set up to track remote branch 'dev' from 'origin'.\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br")])]),n("p",[e._v("再pull：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ git pull\nAuto-merging env.txt\nCONFLICT (add/add): Merge conflict in env.txt\nAutomatic merge failed; fix conflicts and then commit the result.\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br")])]),n("p",[e._v("这回"),n("code",[e._v("git pull")]),e._v("成功，但是合并有冲突，需要手动解决，解决的方法和分支管理中的"),n("a",{attrs:{href:"http://www.liaoxuefeng.com/wiki/896043488029600/900004111093344",target:"_blank",rel:"noopener noreferrer"}},[e._v("解决冲突"),n("OutboundLink")],1),e._v("完全一样。解决后，提交，再push：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('$ git commit -m "fix env conflict"\n[dev 57c53ab] fix env conflict\n\n$ git push origin dev\nCounting objects: 6, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (4/4), done.\nWriting objects: 100% (6/6), 621 bytes | 621.00 KiB/s, done.\nTotal 6 (delta 0), reused 0 (delta 0)\nTo github.com:michaelliao/learngit.git\n   7a5e5dd..57c53ab  dev -> dev\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br")])]),n("p",[e._v("因此，多人协作的工作模式通常是这样：")]),e._v(" "),n("ol",[n("li",[e._v("首先，可以试图用"),n("code",[e._v("git push origin")]),e._v("推送自己的修改；")]),e._v(" "),n("li",[e._v("如果推送失败，则因为远程分支比你的本地更新，需要先用"),n("code",[e._v("git pull")]),e._v("试图合并；")]),e._v(" "),n("li",[e._v("如果合并有冲突，则解决冲突，并在本地提交；")]),e._v(" "),n("li",[e._v("没有冲突或者解决掉冲突后，再用"),n("code",[e._v("git push origin")]),e._v("推送就能成功！")])]),e._v(" "),n("p",[e._v("如果"),n("code",[e._v("git pull")]),e._v("提示"),n("code",[e._v("no tracking information")]),e._v("，则说明本地分支和远程分支的链接关系没有创建，用命令"),n("code",[e._v("git branch --set-upstream-to origin/")]),e._v("。")]),e._v(" "),n("p",[e._v("这就是多人协作的工作模式，一旦熟悉了，就非常简单。")]),e._v(" "),n("h3",{attrs:{id:"小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[e._v("#")]),e._v(" 小结")]),e._v(" "),n("ul",[n("li",[e._v("查看远程库信息，使用"),n("code",[e._v("git remote -v")]),e._v("；")]),e._v(" "),n("li",[e._v("本地新建的分支如果不推送到远程，对其他人就是不可见的；")]),e._v(" "),n("li",[e._v("从本地推送分支，使用"),n("code",[e._v("git push origin branch-name")]),e._v("，如果推送失败，先用"),n("code",[e._v("git pull")]),e._v("抓取远程的新提交；")]),e._v(" "),n("li",[e._v("在本地创建和远程分支对应的分支，使用"),n("code",[e._v("git checkout -b branch-name origin/branch-name")]),e._v("，本地和远程分支的名称最好一致；")]),e._v(" "),n("li",[e._v("建立本地分支和远程分支的关联，使用"),n("code",[e._v("git branch --set-upstream branch-name origin/branch-name")]),e._v("；")]),e._v(" "),n("li",[e._v("从远程抓取分支，使用"),n("code",[e._v("git pull")]),e._v("，如果有冲突，要先处理冲突。")])])])}),[],!1,null,null,null);s.default=t.exports}}]);